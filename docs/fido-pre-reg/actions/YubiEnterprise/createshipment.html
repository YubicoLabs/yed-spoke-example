<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-fido-pre-reg/actions/YubiEnterprise/createshipment">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Create FIDO Pre-reg shipment | YubiEnterprise Delivery + ServiceNow Example</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yubicolabs.github.io/yed-spoke-example/img/yubico-logo.png"><meta data-rh="true" name="twitter:image" content="https://yubicolabs.github.io/yed-spoke-example/img/yubico-logo.png"><meta data-rh="true" property="og:url" content="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/createshipment"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create FIDO Pre-reg shipment | YubiEnterprise Delivery + ServiceNow Example"><meta data-rh="true" name="description" content="In this step we will configure the custom action that will call to the YubiEnterprise Delivery API to create a new YubiKey with FIDO Pre-reg shipment."><meta data-rh="true" property="og:description" content="In this step we will configure the custom action that will call to the YubiEnterprise Delivery API to create a new YubiKey with FIDO Pre-reg shipment."><link data-rh="true" rel="icon" href="/yed-spoke-example/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/createshipment"><link data-rh="true" rel="alternate" href="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/createshipment" hreflang="en"><link data-rh="true" rel="alternate" href="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/createshipment" hreflang="x-default"><link rel="stylesheet" href="/yed-spoke-example/assets/css/styles.319d6c73.css">
<link rel="preload" href="/yed-spoke-example/assets/js/runtime~main.66cb5edb.js" as="script">
<link rel="preload" href="/yed-spoke-example/assets/js/main.5567d05f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/yed-spoke-example/"><div class="navbar__logo"><img src="/yed-spoke-example/img/yubico-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/yed-spoke-example/img/yubico-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">YubiEnterprise Delivery ServiceNow Example</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/yed-spoke-example/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/YubicoLabs/yed-spoke-example" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/intro">YubiEnterprise Delivery API ServiceNow Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/prereqs">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/scoped_app">Create a scoped application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/catalog">Create catalog item</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/connections">Configure connection credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/action">Create a custom action</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/flow">Create a custom flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/yed-spoke-example/docs/category/advanced-use-cases">Advanced use cases</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced use cases&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/yed-spoke-example/docs/category/fido-pre-reg">FIDO Pre-reg</a><button aria-label="Toggle the collapsible sidebar category &#x27;FIDO Pre-reg&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/overview">FIDO Pre-reg overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/prereqs">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/createcatalog">Create a catalog item</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/connections">Configure connection credentials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/actions">Custom actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Custom actions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/yed-spoke-example/docs/category/yubienterprise-delivery-api-actions">YubiEnterprise Delivery API actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;YubiEnterprise Delivery API actions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/createshipment">Create FIDO Pre-reg shipment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/transpontkeys">Get Yubico Transport and Signing Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/getshipment">Get FIDO Pre-reg shipment details</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/actions/IdentityProviders">Identity Provider Actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Identity Provider Actions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/flows">Custom flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Custom flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/references">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/help_and_support">Help &amp; support</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/yed-spoke-example/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/yed-spoke-example/docs/category/fido-pre-reg"><span itemprop="name">FIDO Pre-reg</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/yed-spoke-example/docs/fido-pre-reg/actions"><span itemprop="name">Custom actions</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/yed-spoke-example/docs/category/yubienterprise-delivery-api-actions"><span itemprop="name">YubiEnterprise Delivery API actions</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create FIDO Pre-reg shipment</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Create FIDO Pre-reg shipment</h1><p>In this step we will configure the custom action that will call to the YubiEnterprise Delivery API to create a new YubiKey with FIDO Pre-reg shipment.</p><p>Before you proceed ensure that you have configured the connection alias and credential used for calling the YubiEnterprise API with your API token.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="action-properties">Action properties<a href="#action-properties" class="hash-link" aria-label="Direct link to Action properties" title="Direct link to Action properties">​</a></h2><p>On the ServiceNow home screen, search for <strong>flow designer</strong>.</p><p>Click <strong>Flow Designer</strong>, a new window should open.</p><p><img loading="lazy" alt="Configuration menu" src="/yed-spoke-example/assets/images/actions_1-6c8d24b2e107a86124eaf93c42a41fc6.png" width="2560" height="920" class="img_ev3q"></p><p>Once the <strong>Flow Designer</strong> page opens, click the <strong>Create new</strong> button, then select <strong>Action</strong>.</p><p><img loading="lazy" alt="Configuration menu" src="/yed-spoke-example/assets/images/actions_2-2fc809dc87561ebac60cb95a0c473be8.png" width="2560" height="618" class="img_ev3q"></p><p>A menu will appear to configure the action&#x27;s properties. Use the following values to initialize your action.</p><ul><li><strong>Action name</strong>: YubiEnterprise create shipment (Pre-reg)</li><li><strong>Application</strong>: YubiEnterprise Delivery App</li><li><strong>Description</strong>: Place an order for a new FIDO Pre-reg YubiKey through the YubiEnterprise Delivery API</li><li>Use the defaults for the remaining properties</li></ul><p><img loading="lazy" alt="Configuration menu" src="/yed-spoke-example/assets/images/pr-3-9915bfb19e35c3a50399370b1ddb98e5.png" width="1304" height="1000" class="img_ev3q"></p><p>Click <strong>Submit</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="action-inputs">Action inputs<a href="#action-inputs" class="hash-link" aria-label="Direct link to Action inputs" title="Direct link to Action inputs">​</a></h2><p>Next we are going to configure the inputs that go into the action. These inputs are the parameters that are going to be passed into our API call by our flow.</p><p>For each row in the table below, perform the following steps:</p><ol><li>Click the <strong>+Create Input</strong> button at the top.</li><li>Fill in the input using the data provided below to the corresponding field (note that name will be automatically input).</li></ol><table><thead><tr><th>Label</th><th>Type</th><th>Mandatory</th></tr></thead><tbody><tr><td>Company</td><td>String</td><td>on</td></tr><tr><td>Delivery Email</td><td>String</td><td>on</td></tr><tr><td>First name</td><td>String</td><td>on</td></tr><tr><td>Last name</td><td>String</td><td>on</td></tr><tr><td>Phone number</td><td>String</td><td>on</td></tr><tr><td>Street Line 1</td><td>String</td><td>on</td></tr><tr><td>Street Line 2</td><td>String</td><td>off</td></tr><tr><td>City</td><td>String</td><td>on</td></tr><tr><td>Region</td><td>String</td><td>off</td></tr><tr><td>Postal Code</td><td>String</td><td>on</td></tr><tr><td>Country Code</td><td>String</td><td>on</td></tr><tr><td>Product ID</td><td>String</td><td>on</td></tr><tr><td>Inventory Product ID</td><td>String</td><td>on</td></tr><tr><td>Customization ID</td><td>String</td><td>on</td></tr><tr><td>Quantity</td><td>Integer</td><td>on</td></tr><tr><td>PIN Request JWE</td><td>String</td><td>on</td></tr><tr><td>Credential Request JWE</td><td>String</td><td>on</td></tr><tr><td>Delivery Type</td><td>Integer</td><td>off</td></tr></tbody></table><p>Your actions input menu should look like the example below.</p><p><img loading="lazy" alt="Inputs menu" src="/yed-spoke-example/assets/images/pr-4-bde3ebd62ccb648fc0bf6cba6ad22177.png" width="2560" height="1636" class="img_ev3q"></p><p>Click <strong>Save</strong> once your inputs are complete.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="input-script">Input script<a href="#input-script" class="hash-link" aria-label="Direct link to Input script" title="Direct link to Input script">​</a></h2><p>Next, we will pass our inputs through a script to format our data to ensure that it&#x27;s ready to be consumed by our API.</p><p>On the left side, in the Action Outline, click the blue <strong>+</strong> button.
<img loading="lazy" alt="Input plus" src="/yed-spoke-example/assets/images/actions_5-e0a8e2e478028cf72a90691fb061f41e.png" width="646" height="370" class="img_ev3q"></p><p>Search for <strong>scripts</strong> and select the <strong>Script</strong> option</p><p><img loading="lazy" alt="Inputs menu" src="/yed-spoke-example/assets/images/actions_6-aefdb287d08807a9c85cfad94f420ac5.png" width="1870" height="530" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="script-inputs">Script inputs<a href="#script-inputs" class="hash-link" aria-label="Direct link to Script inputs" title="Direct link to Script inputs">​</a></h3><p>We&#x27;ll start by creating inputs for the script. This will utilize the same inputs that we defined in the previous step (yes, sadly this does need to be repeated).</p><p>For each of the items in the table below, do the following steps:</p><ol><li>Click the <strong>+Create Variable</strong> button</li><li>Set the name using the name provided in the table below (warning: these values are case sensitive)</li><li>Drag the corresponding data pill from the right side <strong>Data</strong> menu</li></ol><table><thead><tr><th>Name (case sensitive)</th><th>Data pill</th></tr></thead><tbody><tr><td>company</td><td>Company</td></tr><tr><td>email</td><td>Delivery Email</td></tr><tr><td>first_name</td><td>First name</td></tr><tr><td>last_name</td><td>Last name</td></tr><tr><td>phone_number</td><td>Phone number</td></tr><tr><td>street_line1</td><td>Street Line 1</td></tr><tr><td>street_line2</td><td>Street Line 2</td></tr><tr><td>city</td><td>City</td></tr><tr><td>region</td><td>Region</td></tr><tr><td>postal_code</td><td>Postal Code</td></tr><tr><td>country_code</td><td>Country Code</td></tr><tr><td>product_id</td><td>Product ID</td></tr><tr><td>inventory_product_id</td><td>Inventory Product ID</td></tr><tr><td>customization_id</td><td>Customization ID</td></tr><tr><td>quantity</td><td>Quantity</td></tr><tr><td>pin_jwe</td><td>PIN Request JWE</td></tr><tr><td>credential_jwe</td><td>Credential Request JWE</td></tr><tr><td>delivery_type</td><td>Delivery Type</td></tr></tbody></table><p>Your script inputs menu should look like the example below.</p><p><img loading="lazy" alt="Inputs menu" src="/yed-spoke-example/assets/images/pr-5-6771e23f7c5efc19c8109b6cf6cb3bb6.png" width="3042" height="1426" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-the-script">Adding the script<a href="#adding-the-script" class="hash-link" aria-label="Direct link to Adding the script" title="Direct link to Adding the script">​</a></h3><p>Next we are going to add a script to <strong>Script</strong> field. Copy the script provided below into the <strong>Script</strong> field.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">inputs</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Below are the character constraints of the text inputs</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * An example of handling this is shown in the &quot;recipient&quot; field</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * The same pattern can be used for the other fields you wish to constrain</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * country_code_2: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * recipient: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * recipient_firstname: 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * recipient_lastname: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * street_line_1, and 2: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * city: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * region: 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * recipient_email: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * recipient_telephone: 40</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Note, when using a substring, take a few characters off of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * limit as special characters count for * more than 1 character</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  outputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">shipment_exact_request</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">delivery_type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parseInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">delivery_type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">recipient</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">recipient_company</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">recipient_email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">recipient_firstname</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">first_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">recipient_lastname</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">last_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">recipient_telephone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">phone_number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">mailing_address</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">street_line1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">street_line1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">street_line2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">street_line2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">city</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">city</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">region</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">region</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">postal_code</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">postal_code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">country_code_2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">country_code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">shipment_items</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">product_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parseInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">product_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">inventory_product_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parseInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">inventory_product_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">product_quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parseInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">customization_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customization_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">product_customizations</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">fido_pin_request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">pin_jwe</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">fido_credential_requests</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cred_jwe</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="script-outputs">Script outputs<a href="#script-outputs" class="hash-link" aria-label="Direct link to Script outputs" title="Direct link to Script outputs">​</a></h3><p>Lastly, we will add the output variable for the script. This will pass the JSON object that we created in the previous step to the action component that will make the HTTP REST call to the YubiEnterprise Delivery API.</p><p>In the <strong>Output Variables</strong> section, click the <strong>+Create Variable</strong> button.</p><p>Set the single output using the variables below:</p><ul><li><strong>Label</strong>: Shipment Exact Request</li><li><strong>Name</strong>: Will be auto populated based on the label</li><li><strong>Type</strong>: String (default)</li><li><strong>Mandatory</strong>: on</li></ul><p>Your script outputs menu should look like the example below.</p><p><img loading="lazy" alt="Scripts outputs" src="/yed-spoke-example/assets/images/actions_8-cc207219283a813f6dd53dec1cb15a44.png" width="1512" height="430" class="img_ev3q"></p><p>Click Save once your script is ready.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-rest-call">API REST call<a href="#api-rest-call" class="hash-link" aria-label="Direct link to API REST call" title="Direct link to API REST call">​</a></h2><p>Next we will configure the action step for making the REST HTTP call to the YubiEnterprise Delivery API.</p><p>On the left side, in the Action Outline, click the <strong>bottom</strong> blue <strong>+</strong> button.</p><p><img loading="lazy" alt="Add second action" src="/yed-spoke-example/assets/images/actions_9-ab33ed367dacfa237a22bcb9f773d672.png" width="680" height="494" class="img_ev3q"></p><p>Search for <strong>rest</strong> and select the <strong>REST</strong> option</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If the REST option does not appear then you have not activated the IntegrationHub plugin. Follow the instructions in the <a href="/yed-spoke-example/docs/prereqs">prerequisites</a> section.</p></div></div><p><img loading="lazy" alt="Inputs menu" src="/yed-spoke-example/assets/images/actions_10-35c8b3dc1042df1274941090fd71c58c.png" width="1840" height="578" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-details">Connection details<a href="#connection-details" class="hash-link" aria-label="Direct link to Connection details" title="Direct link to Connection details">​</a></h3><p>First we will add our API credentials to the REST call. We will utilize the connection alias that was created earlier in this guide.</p><p>Ensure that the Connection field is set to <strong>Use Connection Alias</strong>.</p><p>Change the <strong>Connection Alias</strong> to the one created earlier in the guide. The <strong>Base URL</strong> should be set automatically based on the connection alias.</p><p>Your connection details should look like the example below.</p><p><img loading="lazy" alt="Connection details final" src="/yed-spoke-example/assets/images/actions_11-c331950ddd19f34be8467ffe0796161c.png" width="1538" height="438" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-details">Request details<a href="#request-details" class="hash-link" aria-label="Direct link to Request details" title="Direct link to Request details">​</a></h3><p>Next we will configure the details of the API method call. We will be utilizing the <a href="https://console.yubico.com/apidocs/#tag/fido2PreRegisteredShipments/operation/CreateFPRShipment" target="_blank" rel="noopener noreferrer"><code>POST /fpr/shipments</code></a> API method</p><p>Configure the Request Details section with the following values:</p><ul><li><strong>Build Request</strong>: Manually</li><li><strong>Resource Path</strong>: /fpr/shipments</li><li><strong>HTTP Method</strong>: POST</li></ul><p>The <strong>Headers</strong> should include two header properties using the values below</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>Accept</td><td>application/json</td></tr><tr><td>Content-Type</td><td>application/json</td></tr></tbody></table><p>Your request details should look like the example below.</p><p><img loading="lazy" alt="Request details final" src="/yed-spoke-example/assets/images/pr-6-e1ee39c1bd8a8d27452bc22327ff833e.png" width="2222" height="808" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-content">Request content<a href="#request-content" class="hash-link" aria-label="Direct link to Request content" title="Direct link to Request content">​</a></h3><p>Next we will add data to the body of our POST request. We will utilize the output of the previous script step. In the <strong>Request Content</strong> section, set the following values</p><ul><li><strong>Request Type</strong>: Text</li><li><strong>Request Body</strong>: Drag the <strong>Shipment Exact Request</strong> data pill from the <strong>Script step</strong> section on the right side of the menu.</li></ul><p>Your request content should look like the example below.</p><p><img loading="lazy" alt="Request details final" src="/yed-spoke-example/assets/images/actions_13-3274a04b14e4ec729e63957bbb391a25.png" width="2200" height="456" class="img_ev3q"></p><p>Click save once your API call is complete</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="output-script">Output script<a href="#output-script" class="hash-link" aria-label="Direct link to Output script" title="Direct link to Output script">​</a></h2><p>We will now create another script to format the outputs of the action. This will ensure that we can capture data from a successful shipment, and to identify and understand potential errors.</p><p>On the left side, in the Action Outline, click the bottom blue <strong>+</strong> button.
<img loading="lazy" alt="Action outline 3" src="/yed-spoke-example/assets/images/actions_14-8ba52e8853465c52f2b8fb1e13a4f6a0.png" width="650" height="604" class="img_ev3q"></p><p>Search for <strong>scripts</strong> and select the <strong>Script</strong> option</p><p><img loading="lazy" alt="Script action step" src="/yed-spoke-example/assets/images/actions_6-aefdb287d08807a9c85cfad94f420ac5.png" width="1870" height="530" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="script-inputs-1">Script inputs<a href="#script-inputs-1" class="hash-link" aria-label="Direct link to Script inputs" title="Direct link to Script inputs">​</a></h3><p>We&#x27;ll start by creating the input for the script. We will only create one input, which will be the result of the previous REST step call</p><ol><li>Click the <strong>+Create Variable</strong> button</li><li><strong>Name</strong>: responseBody (case sensitive)</li><li><strong>Value</strong>: Drag the Response Body data pill from the REST step section on the right side of the menu</li></ol><p>Your script inputs menu should look like the example below.</p><p><img loading="lazy" alt="Script action step" src="/yed-spoke-example/assets/images/actions_15-8a5ed3e88689a7c4de22f17485bf8a3f.png" width="1494" height="584" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-the-script-1">Adding the script<a href="#adding-the-script-1" class="hash-link" aria-label="Direct link to Adding the script" title="Direct link to Adding the script">​</a></h3><p>Next we are going to add a script to Script field. Copy the script provided below into the Script field.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">inputs</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseBody</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  outputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">shipment_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">shipment_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  outputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">shipment_state_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parseInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">shipment_state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">shipment_state_id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="script-outputs-1">Script outputs<a href="#script-outputs-1" class="hash-link" aria-label="Direct link to Script outputs" title="Direct link to Script outputs">​</a></h3><p>Lastly, we will add the output variables for the script</p><p>For each row in the table below, perform the following steps:</p><ol><li>Click the <strong>+Create Variable</strong> button at the bottom.</li><li>Fill in the input using the data provided below to the corresponding field (note that name will be automatically input).</li></ol><table><thead><tr><th>Label</th><th>Type</th><th>Mandatory</th></tr></thead><tbody><tr><td>shipment_id</td><td>String</td><td>on</td></tr><tr><td>shipment_state_id</td><td>Integer</td><td>on</td></tr></tbody></table><p>Your script outputs menu should look like the example below.</p><p><img loading="lazy" alt="Script outputs" src="/yed-spoke-example/assets/images/pr-7-285435de51ae216ef16192cb1839d172.png" width="2180" height="526" class="img_ev3q"></p><p>Click <strong>Save</strong> once your output script is complete</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="action-outputs">Action outputs<a href="#action-outputs" class="hash-link" aria-label="Direct link to Action outputs" title="Direct link to Action outputs">​</a></h2><p>Lastly we will define the outputs of the action. These outputs will be usable by the final flow that will orchestrate the ordering experience. We want to ensure that the action outputs are able to express details about the new shipment, or any issues should they occur.</p><p>We will start by clicking the <strong>Outputs</strong> tab in the <strong>Action Outline</strong> pane.</p><p><img loading="lazy" alt="Action outline outputs" src="/yed-spoke-example/assets/images/actions_17-d224ccaf34ea21aa1ade1d197b3f2a79.png" width="650" height="744" class="img_ev3q"></p><p>Next we are going to configure the outputs.</p><p>For each row in the table below, perform the following steps:</p><ol><li>Click the <strong>+Create Output</strong> button at the top.</li><li>Fill in the input using the data provided below to the corresponding field (Note: Unlike the previous examples, the <strong>Name</strong> field is not auto-populated).</li></ol><table><thead><tr><th>Label</th><th>Name</th><th>Type</th><th>Mandatory</th></tr></thead><tbody><tr><td>Status Code</td><td>status_code</td><td>String</td><td>on</td></tr><tr><td>Shipment ID</td><td>shipment_id</td><td>String</td><td>off</td></tr><tr><td>Shipment State ID</td><td>shipment_state_id</td><td>Integer</td><td>off</td></tr></tbody></table><p>Your actions outputs menu should look like the example below.</p><p><img loading="lazy" alt="Inputs menu" src="/yed-spoke-example/assets/images/pr-8-59bdd8dc13c2e3a841cb9ccb7ffb4c59.png" width="2308" height="558" class="img_ev3q"></p><p>Once complete, press the <strong>Exit Edit Mode</strong> button on the top of the menu.</p><p>A new menu should appear showing the outputs you just defined with empty <strong>Value</strong> fields. For each output, you will add a data pill from the <strong>REST step</strong> and <strong>the second</strong> <strong>Script step</strong> sections on the right side of the menu</p><p>Use the table below to correlate the correct data pill to a label.</p><table><thead><tr><th>Label</th><th>Section &gt; Data pill</th></tr></thead><tbody><tr><td>Status Code</td><td>REST step &gt; Status Code</td></tr><tr><td>Shipment ID</td><td>Script step &gt; shipment_id</td></tr><tr><td>Shipment State ID</td><td>Script Step &gt; shipment_state_id</td></tr></tbody></table><p>Your actions outputs menu should look like the example below.</p><p><img loading="lazy" alt="Inputs menu" src="/yed-spoke-example/assets/images/pr-9-cdf9d154e040913f1adeb422e05d3031.png" width="2902" height="1152" class="img_ev3q"></p><p>Click <strong>Save</strong> once your outputs are complete</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="publish-the-action">Publish the action<a href="#publish-the-action" class="hash-link" aria-label="Direct link to Publish the action" title="Direct link to Publish the action">​</a></h2><p>If everything looks good, click the <strong>Publish</strong> button at the top of the action menu to make the action available for all flows.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/YubicoLabs/yed-spoke-example/tree/main/docs/docs/fido-pre-reg/actions/YubiEnterprise/createshipment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/yed-spoke-example/docs/category/yubienterprise-delivery-api-actions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">YubiEnterprise Delivery API actions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/yed-spoke-example/docs/fido-pre-reg/actions/YubiEnterprise/transpontkeys"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Get Yubico Transport and Signing Keys</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#action-properties" class="table-of-contents__link toc-highlight">Action properties</a></li><li><a href="#action-inputs" class="table-of-contents__link toc-highlight">Action inputs</a></li><li><a href="#input-script" class="table-of-contents__link toc-highlight">Input script</a><ul><li><a href="#script-inputs" class="table-of-contents__link toc-highlight">Script inputs</a></li><li><a href="#adding-the-script" class="table-of-contents__link toc-highlight">Adding the script</a></li><li><a href="#script-outputs" class="table-of-contents__link toc-highlight">Script outputs</a></li></ul></li><li><a href="#api-rest-call" class="table-of-contents__link toc-highlight">API REST call</a><ul><li><a href="#connection-details" class="table-of-contents__link toc-highlight">Connection details</a></li><li><a href="#request-details" class="table-of-contents__link toc-highlight">Request details</a></li><li><a href="#request-content" class="table-of-contents__link toc-highlight">Request content</a></li></ul></li><li><a href="#output-script" class="table-of-contents__link toc-highlight">Output script</a><ul><li><a href="#script-inputs-1" class="table-of-contents__link toc-highlight">Script inputs</a></li><li><a href="#adding-the-script-1" class="table-of-contents__link toc-highlight">Adding the script</a></li><li><a href="#script-outputs-1" class="table-of-contents__link toc-highlight">Script outputs</a></li></ul></li><li><a href="#action-outputs" class="table-of-contents__link toc-highlight">Action outputs</a></li><li><a href="#publish-the-action" class="table-of-contents__link toc-highlight">Publish the action</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other resources and guides</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developers.yubico.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">developers.yubico.com</a></li><li class="footer__item"><a href="https://yubicolabs.github.io/passkey-workshop/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Passkey workshop</a></li><li class="footer__item"><a href="https://yubicolabs.github.io/secure-software-supply-chain-guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Secure software supply chain guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/yubico" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Yubico © 2024. Built with Docusaurus.</div></div></div></footer></div>
<script src="/yed-spoke-example/assets/js/runtime~main.66cb5edb.js"></script>
<script src="/yed-spoke-example/assets/js/main.5567d05f.js"></script>
</body>
</html>