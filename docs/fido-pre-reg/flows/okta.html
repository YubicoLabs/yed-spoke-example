<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-fido-pre-reg/flows/okta">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Okta | YubiEnterprise Delivery + ServiceNow Example</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yubicolabs.github.io/yed-spoke-example/img/yubico-logo.png"><meta data-rh="true" name="twitter:image" content="https://yubicolabs.github.io/yed-spoke-example/img/yubico-logo.png"><meta data-rh="true" property="og:url" content="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/flows/okta"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Okta | YubiEnterprise Delivery + ServiceNow Example"><meta data-rh="true" name="description" content="In this step we will configure the custom ServiceNow flow to orchestrate the steps required to perform FIDO Pre-reg. This step assumes that you have already configured the catalog item, and the various actions for both the YubiEnterprise, and Okta APIs."><meta data-rh="true" property="og:description" content="In this step we will configure the custom ServiceNow flow to orchestrate the steps required to perform FIDO Pre-reg. This step assumes that you have already configured the catalog item, and the various actions for both the YubiEnterprise, and Okta APIs."><link data-rh="true" rel="icon" href="/yed-spoke-example/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/flows/okta"><link data-rh="true" rel="alternate" href="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/flows/okta" hreflang="en"><link data-rh="true" rel="alternate" href="https://yubicolabs.github.io/yed-spoke-example/docs/fido-pre-reg/flows/okta" hreflang="x-default"><link rel="stylesheet" href="/yed-spoke-example/assets/css/styles.319d6c73.css">
<link rel="preload" href="/yed-spoke-example/assets/js/runtime~main.d5b39566.js" as="script">
<link rel="preload" href="/yed-spoke-example/assets/js/main.6e0359a0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/yed-spoke-example/"><div class="navbar__logo"><img src="/yed-spoke-example/img/yubico-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/yed-spoke-example/img/yubico-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">YubiEnterprise Delivery ServiceNow Example</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/yed-spoke-example/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/YubicoLabs/yed-spoke-example" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/intro">YubiEnterprise Delivery API ServiceNow Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/prereqs">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/scoped_app">Create a scoped application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/catalog">Create catalog item</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/connections">Configure connection credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/action">Create a custom action</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/flow">Create a custom flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/yed-spoke-example/docs/category/advanced-use-cases">Advanced use cases</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced use cases&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/yed-spoke-example/docs/category/fido-pre-reg">FIDO Pre-reg</a><button aria-label="Toggle the collapsible sidebar category &#x27;FIDO Pre-reg&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/overview">FIDO Pre-reg overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/prereqs">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/createcatalog">Create a catalog item</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/connections">Configure connection credentials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/actions">Custom actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Custom actions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/flows">Custom flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Custom flow&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/yed-spoke-example/docs/fido-pre-reg/flows/okta">Okta</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/references">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/yed-spoke-example/docs/help_and_support">Help &amp; support</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/yed-spoke-example/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/yed-spoke-example/docs/category/fido-pre-reg"><span itemprop="name">FIDO Pre-reg</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/yed-spoke-example/docs/fido-pre-reg/flows"><span itemprop="name">Custom flow</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Okta</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Okta</h1><p>In this step we will configure the custom ServiceNow flow to orchestrate the steps required to perform FIDO Pre-reg. This step assumes that you have already configured the catalog item, and the various actions for both the YubiEnterprise, and Okta APIs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="flow-properties">Flow properties<a href="#flow-properties" class="hash-link" aria-label="Direct link to Flow properties" title="Direct link to Flow properties">​</a></h2><p>On the ServiceNow home screen, search for <strong>flow designer</strong>.</p><p>Click <strong>Flow Designer</strong>, a new window should open.</p><p><img loading="lazy" alt="Configuration menu" src="/yed-spoke-example/assets/images/actions_1-6c8d24b2e107a86124eaf93c42a41fc6.png" width="2560" height="920" class="img_ev3q"></p><p>Once the <strong>Flow Designer</strong> page opens, click the <strong>Create new</strong> button, then select <strong>Flow</strong>.</p><p><img loading="lazy" alt="Configuration menu" src="/yed-spoke-example/assets/images/flow_1-7ba40c5e3f8713d41b56feebc8d85bb4.png" width="3056" height="514" class="img_ev3q"></p><p>A menu will appear to configure the action&#x27;s properties. Use the following values to initialize your action.</p><ul><li><strong>Flow name</strong>: YubiEnterprise Okta Pre-reg Flow</li><li><strong>Description</strong>: Create a new FIDO Pre-reg YubiKey shipment with an Okta credential</li><li><strong>Application</strong>: YubiEnterprise Delivery App</li><li>Use the defaults for the remaining properties</li></ul><p><img loading="lazy" alt="Flow properties" src="/yed-spoke-example/assets/images/pr-61-79447da6c6fef747d8bf4d6f366d10bb.png" width="1356" height="988" class="img_ev3q"></p><p>Click <strong>Submit</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-flow-trigger">Add flow trigger<a href="#add-flow-trigger" class="hash-link" aria-label="Direct link to Add flow trigger" title="Direct link to Add flow trigger">​</a></h2><p>Next, we&#x27;re going to add a trigger. This will be the mechanism that will be used to start the flow. In our case, the trigger will be the custom catalog item that we built earlier.</p><p>First, click the <strong>+ Add a trigger</strong> button.</p><p><img loading="lazy" alt="Add a trigger button" src="/yed-spoke-example/assets/images/pr-62-c0af8afadc802a68c13e150b249a28c1.png" width="1110" height="328" class="img_ev3q"></p><p>A menu should appear to search for a trigger. Search for <strong>service catalog</strong> and select <strong>Service Catalog</strong>. This option can also be found in the <strong>Application</strong> category.</p><p><img loading="lazy" alt="Service catalog trigger option" src="/yed-spoke-example/assets/images/flow_4-8ad35690a06a14381fa9482993864ee4.png" width="1108" height="802" class="img_ev3q"></p><p>Once selected, press <strong>Done</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-form-variables">Add the form variables<a href="#add-the-form-variables" class="hash-link" aria-label="Direct link to Add the form variables" title="Direct link to Add the form variables">​</a></h2><p>Next we will ingest the custom form values that we created when the catalog item was created.</p><p>First click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>get catalog variables</strong>, and select <strong>Get Catalog Variables</strong>.</p><p><img loading="lazy" alt="get catalog variables" src="/yed-spoke-example/assets/images/flow_5-3b4ca4f84e03be8b75460a0776876131.png" width="1108" height="814" class="img_ev3q"></p><p>Once the new menu appears, drag the <strong>Request Item Record</strong> data pill from the <strong>Data</strong> table on the right into the <strong>Submitted Request</strong>.</p><p>For the <strong>Template</strong> input, search for <strong>yubikey</strong> and select <strong>YubiKey - Pre-reg</strong> (this will refer to the custom catalog item template that we previously created).</p><p>Use the right facing arrow to move the following fields to the column on the right</p><ul><li>first_name</li><li>last_name</li><li>organization_email</li><li>personal_email</li><li>phone_number</li><li>street_address</li><li>apt_or_unit</li><li>city</li><li>region</li><li>postal_code</li><li>country</li><li>is_the_user_receiving_their_first_yubikey_or_a_replacement</li><li>select_a_yubikey_model</li></ul><p>Your form variables menu should look like the example below.</p><p><img loading="lazy" alt="final get catalog variables" src="/yed-spoke-example/assets/images/pr-63-03aa1b39990f8859c94305491553d1ae.png" width="2920" height="1500" class="img_ev3q"></p><p>Once ready, press <strong>Done</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-read-okta-user-action">Add the Read Okta User action<a href="#add-the-read-okta-user-action" class="hash-link" aria-label="Direct link to Add the Read Okta User action" title="Direct link to Add the Read Okta User action">​</a></h2><p>Next we&#x27;re going to make a call to the action to get the user&#x27;s ID from Okta.</p><p>First click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>okta read user</strong>, and select <strong>Okta Read User</strong>.</p><p>Next we&#x27;re going to map the recipient email from the form to the user email input for the Okta Read User action.</p><p>Use the table below to correlate the correct data pill, to the action input.</p><table><thead><tr><th>Label</th><th>Section &gt; Data pill or default value</th></tr></thead><tbody><tr><td>User Login</td><td>Get Catalog Variable &gt; organization_email</td></tr></tbody></table><p>Your action input mappings menu should look like the example below.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-64-4258afcfe43ea6b12978072aa9f4d302.png" width="2872" height="408" class="img_ev3q"></p><p>Click <strong>Done</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-yubienterprise-transportsigning-keys-action">Add the YubiEnterprise Transport/Signing Keys action<a href="#add-the-yubienterprise-transportsigning-keys-action" class="hash-link" aria-label="Direct link to Add the YubiEnterprise Transport/Signing Keys action" title="Direct link to Add the YubiEnterprise Transport/Signing Keys action">​</a></h2><p>Next we&#x27;re going to make a call to the YubiEnterprise console in order to get Yubico&#x27;s public transport and signing keys.</p><p>First click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>yubienterprise</strong>, and select <strong>YubiEnterprise Transport/Signing Keys</strong>.</p><p>No inputs should be needed for this step.</p><p>Click <strong>Done</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-okta-create-enrollment-action">Add the Okta Create Enrollment action<a href="#add-the-okta-create-enrollment-action" class="hash-link" aria-label="Direct link to Add the Okta Create Enrollment action" title="Direct link to Add the Okta Create Enrollment action">​</a></h2><p>Next we&#x27;re going to make a call to the Okta Enrollment API in order to begin the FIDO Pre-reg ceremony.</p><p>First click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>okta create enrollment</strong>, and select <strong>Okta Create Enrollment</strong>.</p><p><img loading="lazy" alt="add action" src="/yed-spoke-example/assets/images/pr-65-abc3d91588cc8bfd07fde996b6caaa47.png" width="2872" height="754" class="img_ev3q"></p><p>Next we&#x27;re going to map information about the user to create a new FIDO Pre-reg enrollment against the Okta API.</p><p>Use the table below to correlate the correct data pill, to the inputs of the action.</p><table><thead><tr><th>Label</th><th>Section &gt; Data pill or default value</th></tr></thead><tbody><tr><td>User ID</td><td>Okta Read User &gt; User ID</td></tr><tr><td>Fulfillment Provider</td><td>yubico</td></tr><tr><td>RP ID</td><td>Enter the domain of your Okta tenant (omit any protocol or path values). E.x. yubico-test.okta.com</td></tr><tr><td>Yubico Transport Keys</td><td>YubiEnterprise Transport/Signing Keys action &gt; Transport Keys</td></tr></tbody></table><p>Your action input mappings menu should look like the example below.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-66-4fb13a4fe2a0c874ac42875cb64905a9.png" width="3502" height="726" class="img_ev3q"></p><p>Click <strong>Done</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-yubienterprise-create-shipment-pre-reg-action">Add the YubiEnterprise create shipment (Pre-reg) action<a href="#add-the-yubienterprise-create-shipment-pre-reg-action" class="hash-link" aria-label="Direct link to Add the YubiEnterprise create shipment (Pre-reg) action" title="Direct link to Add the YubiEnterprise create shipment (Pre-reg) action">​</a></h2><p>Next we&#x27;re going to make a call to the YubiEnterprise API in order to create the YubiKey shipment.</p><p>First click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>yubienterprise create</strong>, and select <strong>YubiEnterprise create shipment (Pre-reg)</strong>.</p><p><img loading="lazy" alt="add action" src="/yed-spoke-example/assets/images/pr-67-52d837d2b61583a41a065172f95e4d7d.png" width="1300" height="522" class="img_ev3q"></p><p>Next we&#x27;re going to map the shipping and credential information to the action in order to create the shipment.</p><p>Use the table below to correlate the correct data pill, to the inputs of the action.</p><table><thead><tr><th>Label</th><th>Section &gt; Data pill or default value</th></tr></thead><tbody><tr><td>Company</td><td>Your company name</td></tr><tr><td>Delivery Email</td><td>Get Catalog Variable &gt; personal_email</td></tr><tr><td>First name</td><td>Get Catalog Variable &gt; first_name</td></tr><tr><td>Last name</td><td>Get Catalog Variable &gt; last_name</td></tr><tr><td>Phone number</td><td>Get Catalog Variable &gt; phone_number</td></tr><tr><td>Street Line 1</td><td>Get Catalog Variable &gt; street_address</td></tr><tr><td>Street Line 2</td><td>Get Catalog Variable &gt; apt_or_unit</td></tr><tr><td>City</td><td>Get Catalog Variable &gt; city</td></tr><tr><td>Region</td><td>Get Catalog Variable &gt; region</td></tr><tr><td>Postal Code</td><td>Get Catalog Variable &gt; postal_code</td></tr><tr><td>Country Code</td><td>Get Catalog Variable &gt; country</td></tr><tr><td>Product ID</td><td>Get Catalog Variable &gt; select_a_yubikey_model</td></tr><tr><td>Inventory Product ID</td><td>Get Catalog Variable &gt; is_the_user_receiving_their_first_yubikey_or_a_replacement</td></tr><tr><td>Customization ID</td><td>Enter your YubiEnterprise customization ID - This can be found in the YubiEnterprise console, or you can work with your Yubico contact</td></tr><tr><td>Quantity</td><td>1</td></tr><tr><td>PIN Request JWE</td><td>Okta Create Enrollment &gt; PIN Request JWE</td></tr><tr><td>Credential Request JWE</td><td>Okta Create Enrollment &gt; Credential Request JWE</td></tr><tr><td>Delivery Type</td><td>1</td></tr></tbody></table><p>Your action input mappings menu should look like the example below.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-68-edb1afa5a3d39f51083c3e72fa5de61e.png" width="1072" height="1346" class="img_ev3q"></p><p>Click <strong>Done</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-flow-variable">Create flow variable<a href="#create-flow-variable" class="hash-link" aria-label="Direct link to Create flow variable" title="Direct link to Create flow variable">​</a></h3><p>We will need to create a flow variable to keep track of the current shipment state ID. Perform the steps below to create a flow variable.</p><ol><li>Click the 3 dots on the top right of the screen</li><li>Click <strong>Flow Variables</strong></li><li>Click the small <strong>+</strong> button on the right of the pop-up menu</li><li>Set the <strong>Label</strong> to <strong>Current shipment state ID</strong>.</li><li>Set the <strong>Type</strong> to <strong>Integer</strong></li></ol><p>Your final settings should resemble the image below.</p><p><img loading="lazy" alt="Set flow variables" src="/yed-spoke-example/assets/images/bonus_get_13-18f43d189bc52e64e39a1a4b51b35ab0.png" width="1494" height="408" class="img_ev3q"></p><p>When complete, click the <strong>X</strong> button on the top right of the pop-up.</p><p>If you scroll to the top of the <strong>Data</strong> window on the right side, you should see your new flow variable.</p><p><img loading="lazy" alt="Set flow variables" src="/yed-spoke-example/assets/images/bonus_get_14-ee49ffd5cff2ade21fa60a89cc81874b.png" width="616" height="416" class="img_ev3q"></p><p>We will now set the flow variable using the <strong>Shipment State ID</strong> from the <strong>YubiEnterprise create shipment (Pre-reg)</strong> action.</p><p>At the bottom of the flow click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next, select <strong>Flow Logic</strong>.</p><p>Next, search for <strong>set</strong>, then select <strong>Set Flow Variables</strong>.</p><p>A new menu will appear. Begin by clicking the <strong>+</strong> button in the new menu.</p><p>In the <strong>Name</strong> field, select the flow variable <strong>Current shipment state ID</strong>.</p><p>Drag the <strong>Shipment State ID</strong> value from the <strong>Data</strong> window on the right, in the <strong>YubiEnterprise create shipment (Pre-reg)</strong> section.</p><p>Your resulting menu should resemble the image below.</p><p><img loading="lazy" alt="Set flow variables final" src="/yed-spoke-example/assets/images/pr-69-0f007e5cba73c9f5f5ee62653e691985.png" width="3532" height="946" class="img_ev3q"></p><p>When complete, click <strong>Done</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-daily-cron-job">Create daily cron job<a href="#create-daily-cron-job" class="hash-link" aria-label="Direct link to Create daily cron job" title="Direct link to Create daily cron job">​</a></h3><p>Next we will create a cron job that will continuously monitor the shipment that was previously created in the flow. The YubiEnterprise API does not provide webhooks, so we will need to continuously poll the API to catch any changes.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>How often should my cron job run?</div><div class="admonitionContent_S0QG"><p>Due to the physical and logistical nature of a shipment, the state doesn&#x27;t undergo rapid changes in a single day. Due to these considerations, we recommend that you poll the API <strong>once</strong> or <strong>twice</strong> a day.</p><p>You may also consider adding a check that occurs ~15 mins after the initial creation of a shipment to ensure that all of the data was properly validated.</p><p>This example focuses only on the mechanism that runs once a day at a designated time - but the same foundational steps can be used to create a variety of timers based on your use case.</p></div></div><p>First we will create a conditional loop that will run until the shipment has entered into a state where the PIN and credential responses are available, indicated by a <strong>Shipment State ID</strong> of 103 or 104.</p><p>Follow the steps below to create the conditional loop.</p><ol><li>Click <strong>Add an Action, Flow Logic, or Subflow</strong></li><li>Click <strong>Flow Logic</strong></li><li>Select <strong>Do the following until</strong></li></ol><p><img loading="lazy" alt="Create iterator" src="/yed-spoke-example/assets/images/pr-70-27286dda8a2390b6e8b26ef7242aae5a.png" width="1220" height="400" class="img_ev3q"></p><p>A new menu should appear. Configure it with the following values:</p><ul><li><strong>Condition Label</strong>: FIDO Pre-reg response is available</li><li><strong>Condition 1</strong><ul><li>Drag the <strong>Current shipment state ID</strong> flow variable into the first box</li><li>Keep the condition as <strong>is</strong></li><li>In the third box, type <strong>103</strong></li><li>Click the <strong>or</strong> button</li></ul></li><li><strong>Condition 2</strong><ul><li>Drag the <strong>Current shipment state ID</strong> flow variable into the first box</li><li>Keep the condition as <strong>is</strong></li><li>In the third box, type <strong>104</strong></li></ul></li></ul><p>Your final menu should resemble the image below.</p><p><img loading="lazy" alt="Set iterator" src="/yed-spoke-example/assets/images/pr-71-e5b049cd264fb8ce85e7d137cfd0a1dd.png" width="2850" height="676" class="img_ev3q"></p><p>When complete, click <strong>Done</strong>.</p><p>Within the <strong>Do the following</strong> section we are going to add our timer using the instructions below:</p><ol><li>Click <strong>Add an Action, Flow Logic, or Subflow</strong></li><li>Click <strong>Flow Logic</strong></li><li>Select <strong>Wait for a duration of time</strong></li></ol><p><img loading="lazy" alt="Add wait" src="/yed-spoke-example/assets/images/pr-72-52e93beb294bee8a8bc0c883e77a06b1.png" width="1452" height="676" class="img_ev3q"></p><p>A new menu should appear. Configure it with the following values:</p><ul><li><strong>Duration Type</strong>: Explicit duration</li><li><strong>Wait for</strong>: 24 h</li><li><strong>During the following schedule</strong>: 24 x 7</li></ul><p>Your final menu should resemble the image below.</p><p><img loading="lazy" alt="Wait configs" src="/yed-spoke-example/assets/images/pr-73-2d4ae197d026b5d652209e95b0ace807.png" width="2848" height="530" class="img_ev3q"></p><p>When complete, click <strong>Done</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="call-the-yubienterprise-get-shipment-pre-reg-action">Call the YubiEnterprise get shipment (Pre-reg) action<a href="#call-the-yubienterprise-get-shipment-pre-reg-action" class="hash-link" aria-label="Direct link to Call the YubiEnterprise get shipment (Pre-reg) action" title="Direct link to Call the YubiEnterprise get shipment (Pre-reg) action">​</a></h2><p>Next, we are going to call to the YubiEnterprise API to get details about the shipment.</p><p>We will begin by adding the YubiEnterprise get shipment (Pre-reg) action to the conditional loop.</p><p>Within the <strong>Do the following</strong> section we are going to add our custom action using the instructions below:</p><ol><li>Click the <strong>+</strong> button under the <strong>Wait</strong> step you just added</li><li>Click <strong>Add an Action, Flow Logic, or Subflow</strong></li><li>Click <strong>Action</strong></li><li>Search for <strong>yubienterprise get</strong>, and select <strong>YubiEnterprise get shipment (Pre-reg)</strong>.</li></ol><p><img loading="lazy" alt="Add get action" src="/yed-spoke-example/assets/images/pr-74-fe591b7554fe27b0cf8a45096c12433f.png" width="1346" height="588" class="img_ev3q"></p><p>For the field <strong>Shipment ID</strong>, drag the <strong>Shipment Request ID</strong> data pill from the <strong>Data</strong> window, in the section titled <strong>YubiEnterprise create shipment (Pre-reg)</strong>.</p><p><img loading="lazy" alt="Add get action" src="/yed-spoke-example/assets/images/pr-75-a909bd5db3515c1e951f2d5cf55798f3.png" width="2846" height="594" class="img_ev3q"></p><p>Next, we are going to update the flow variable for the <strong>Current Shipment State ID</strong>. This will help us understand if the PIN and credential response is available for processing.</p><p>First we&#x27;ll start by setting the <strong>Flow Variable Current Shipment State ID</strong> to the updated state provided by the <strong>Get FIDO Pre-reg shipment</strong> action.</p><p>These steps should resemble the ones taken earlier on this page. Under the <strong>Get FIDO Pre-reg shipment</strong> action click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next, select <strong>Flow Logic</strong>.</p><p>Next, search for <strong>set</strong>, then select <strong>Set Flow Variables</strong>.</p><p>A new menu will appear. Begin by clicking the <strong>+</strong> button in the new menu.</p><p>In the <strong>Name</strong> field, select the flow variable <strong>Current shipment state ID</strong>.</p><p>Drag the <strong>Shipment State ID</strong> value from the <strong>Data</strong> window on the right, in the <strong>Get FIDO Pre-reg shipment</strong> section.</p><p>Your resulting menu should resemble the image below.</p><p><img loading="lazy" alt="Set flow variables final" src="/yed-spoke-example/assets/images/pr-76-320a5ecb36da5ff721dd485db51d68a1.png" width="3468" height="712" class="img_ev3q"></p><p>When complete, click <strong>Done</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="call-the-yubienterprise-get-shipment-pre-reg-action-again">Call the YubiEnterprise get shipment (Pre-reg) action again<a href="#call-the-yubienterprise-get-shipment-pre-reg-action-again" class="hash-link" aria-label="Direct link to Call the YubiEnterprise get shipment (Pre-reg) action again" title="Direct link to Call the YubiEnterprise get shipment (Pre-reg) action again">​</a></h2><p>Next, we are going to call to the YubiEnterprise API to get details about the shipment again. This is due to ServiceNow not being able to provide values outside of the conditional loop.</p><p>We will begin by adding the YubiEnterprise get shipment (Pre-reg) action directly outside of the conditional loop.</p><p>Outside of the <strong>Do the following</strong> section we are going to add our custom action using the instructions below:</p><ol><li>Click the <strong>+</strong> button under the <strong>Wait</strong> step you just added</li><li>Click <strong>Add an Action, Flow Logic, or Subflow</strong></li><li>Click <strong>Action</strong></li><li>Search for <strong>yubienterprise get</strong>, and select <strong>YubiEnterprise get shipment (Pre-reg)</strong>.</li></ol><p><img loading="lazy" alt="Add get action" src="/yed-spoke-example/assets/images/pr-77-498a279caa6015947380ec5f03a34d4b.png" width="1270" height="576" class="img_ev3q"></p><p>For the field <strong>Shipment ID</strong>, drag the <strong>Shipment Request ID</strong> data pill from the <strong>Data</strong> window, in the section titled <strong>YubiEnterprise create shipment (Pre-reg)</strong>.</p><p>When complete, click <strong>Done</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-okta-activate-credential-action">Add the Okta Activate Credential action<a href="#add-the-okta-activate-credential-action" class="hash-link" aria-label="Direct link to Add the Okta Activate Credential action" title="Direct link to Add the Okta Activate Credential action">​</a></h2><p>Next we&#x27;re going to make a call to the Okta Activation API in order to finalize the enrollment of a FIDO credential against Okta.</p><p>First click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>okta activate credential</strong>, and select <strong>Okta Activate Credential</strong>.</p><p><img loading="lazy" alt="add action" src="/yed-spoke-example/assets/images/pr-78-6fb3623886dca4cc7bb62aafacf530f6.png" width="1252" height="500" class="img_ev3q"></p><p>Next we&#x27;re going to map the inputs from the previous actions into this card.</p><p>Use the table below to correlate the correct data pill, to the inputs of the action.</p><table><thead><tr><th>Label</th><th>Section &gt; Data pill or default value</th></tr></thead><tbody><tr><td>PIN Response</td><td>12 - YubiEnterprise get shipment (Pre-reg) &gt; PIN Response</td></tr><tr><td>Credential Response</td><td>12 - YubiEnterprise get shipment (Pre-reg) &gt; Credential Response</td></tr><tr><td>Authenticator Enrollment ID</td><td>Okta Create Enrollment &gt; Authenticator Enrollment ID</td></tr><tr><td>Fulfillment Provider</td><td>yubico</td></tr><tr><td>User ID</td><td>Okta Read User &gt; User ID</td></tr><tr><td>Serial Number</td><td>12 - YubiEnterprise get shipment (Pre-reg) &gt; Serial Number</td></tr><tr><td>Version</td><td>12 - YubiEnterprise get shipment (Pre-reg) &gt; Firmware Version</td></tr><tr><td>Yubico Signing Keys</td><td>YubiEnterprise Transport/Signing Keys &gt; Signing Keys</td></tr></tbody></table><p>Your action input mappings menu should look like the example below.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-79-751a0b4c5630ea632c8d5aaf9d769b15.png" width="2834" height="1050" class="img_ev3q"></p><p>Click <strong>Done</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-an-approval-before-sending-the-yubikey-pin">Add an approval before sending the YubiKey PIN<a href="#add-an-approval-before-sending-the-yubikey-pin" class="hash-link" aria-label="Direct link to Add an approval before sending the YubiKey PIN" title="Direct link to Add an approval before sending the YubiKey PIN">​</a></h2><p>The next step in the pre-reg cycle is to send the randomly generated YubiKey PIN to the user. Without the PIN, the user will not be able to use the YubiKey or the Okta credential that was pre-registered. At this stage, the admin (or manager of the user) should ensure that the key was correctly received by the intended user. Once this is confirmed (or additional identity proofing has been complete), the manager should approve this request to allow Okta to send the PIN to the user.</p><p>The steps below will highlight how to add an approval to this flow before sending out the PIN.</p><p>Click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>approval</strong>, and select <strong>Ask for Approval</strong>.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-80-c0f1cf5d7ae6deb7853687eb6d9fa09c.png" width="1236" height="508" class="img_ev3q"></p><p>A configuration menu should appear. Populate the fields with the following values:</p><ul><li>Action: Ask For Approval</li><li>Record: Drag the <strong>Requested Item Record</strong> data pill from the <strong>Data</strong> menu</li><li>Table: (Auto-populated) Request item</li><li>Approval Field: (Auto-populated) Approval</li><li>Journal Field: (Auto-populated) Approval History</li><li>Rules:<ul><li>Approve when</li><li>Anyone approves</li><li>Select the person or role who should grant the approval, in this case we are defaulting to the System Administrator</li></ul></li></ul><p>Your approval mappings menu should look like the example below.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-81-9180dffae38ca2ef5a2862d614d98bbd.png" width="2868" height="1014" class="img_ev3q"></p><p>Click <strong>Done</strong></p><p>Next we are going to add a conditional statement to trigger an action if the request was approved.</p><p>Click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Flow Logic</strong> button. When the menu appears and select <strong>if</strong>.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-82-47766de843df14bc47984d367932e563.png" width="1034" height="460" class="img_ev3q"></p><p>A configuration menu should appear. Populate the fields with the following values:</p><ul><li>Condition Label: If approved</li><li>Condition 1:<ul><li>Drag the <strong>Approval State</strong> data pill from the <strong>Data</strong> menu, <strong>14 - Ask for Approval</strong> section</li><li>is</li><li>Select Approved</li></ul></li></ul><p>Your conditional mappings menu should look like the example below.</p><p><img loading="lazy" alt="add action final" src="/yed-spoke-example/assets/images/pr-83-990f02ca751c940fdadb5ec66d279bb8.png" width="2842" height="552" class="img_ev3q"></p><p>Click <strong>Done</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-send-pin-action">Add the Send PIN action<a href="#add-the-send-pin-action" class="hash-link" aria-label="Direct link to Add the Send PIN action" title="Direct link to Add the Send PIN action">​</a></h2><p>Lastly, we will add the action to send the PIN to the user. Be sure that this action is only placed within the approval conditional statement, otherwise the PIN will be automatically sent after activation.</p><p>Within the <strong>If approved</strong> conditional statement click the <strong>+ Add an Action, Flow Logic, or Subflow</strong> button.</p><p>Next click <strong>Action</strong>. When the menu appears, search for <strong>send PIN</strong>, and select <strong>Okta Send PIN</strong>.</p><p><img loading="lazy" alt="add send pin" src="/yed-spoke-example/assets/images/pr-84-4105d5d0a0f48806d673da92601cd46f.png" width="1404" height="542" class="img_ev3q"></p><p>Lastly, populate the action inputs wit the following values:</p><ul><li>User ID: Use the data pill <strong>2 - Okta Read User &gt; User ID</strong></li><li>Authenticator Enrollment ID: Use the data pull <strong>4 - Okta Create Enrollment &gt; Authenticator Enrollment ID</strong></li><li>Fulfillment Provider: yubico</li></ul><p>Your action mappings menu should look like the example below.</p><p><img loading="lazy" alt="send pin example" src="/yed-spoke-example/assets/images/pr-85-0165a5f1dd4c8b79b2e8912c36d857bf.png" width="3448" height="840" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="review-finalized-flow">Review finalized flow<a href="#review-finalized-flow" class="hash-link" aria-label="Direct link to Review finalized flow" title="Direct link to Review finalized flow">​</a></h2><p>At this point, your flow should be fully configured. Use the image below to compare the steps in your implementation to ensure that you have all of the necessary components.</p><p><img loading="lazy" alt="Final flow example" src="/yed-spoke-example/assets/images/pr-86-c90c5ea1ef5de7f5ecec88361b0da31f.png" width="710" height="1642" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="activate-the-flow">Activate the Flow<a href="#activate-the-flow" class="hash-link" aria-label="Direct link to Activate the Flow" title="Direct link to Activate the Flow">​</a></h2><p>To finalize things we&#x27;re going to activate the flow, and get our custom catalog item to trigger it when a new request is made.</p><p>First, click the <strong>Save</strong> button at the top of the screen. Once the flow is done saving click <strong>Activate</strong>.</p><p>Next, return to the main ServiceNow menu, and navigate back to the <strong>Catalog Builder</strong>.</p><p><img loading="lazy" alt="Catalog menu item" src="/yed-spoke-example/assets/images/catalog_1-41a761c76b3dc0949dedff0bda0a2b56.png" width="2910" height="1154" class="img_ev3q"></p><p>Open your <strong>YubiKey - Pre-reg</strong> catalog item, either through the <strong>Recently updated items</strong> menu, or the <strong>Catalog items</strong> tab at the top of the page.</p><p><img loading="lazy" alt="update catalog builder item" src="/yed-spoke-example/assets/images/pr-87-2aeeb49521de851cfa57b03aefbb8cd6.png" width="3504" height="680" class="img_ev3q"></p><p>A menu may appear showing information about your catalog item. Click the <strong>Edit catalog item</strong> button.</p><p><img loading="lazy" alt="update catalog builder item edit menu" src="/yed-spoke-example/assets/images/pr-88-06bf8a4732e607b84603a49dda70bdfb.png" width="1546" height="1048" class="img_ev3q"></p><p>Using the navigation menu on the left, click on <strong>Fulfillment</strong>.</p><p>Once in the <strong>Fulfillment</strong> tab, we&#x27;re going to change the <strong>Selected flow</strong> value to <strong>YubiEnterprise Okta Pre-reg Flow</strong>.</p><p><img loading="lazy" alt="update catalog builder item edit menu" src="/yed-spoke-example/assets/images/pr-89-521bcf9002d0b045ae164741b69f4da1.png" width="1736" height="1124" class="img_ev3q"></p><p>Click <strong>Save</strong>.</p><p>Once the change has been saved, click <strong>Continue to Review and Submit</strong>. When ready, click <strong>Submit</strong>.</p><p>A menu indicating that the save was successful will appear. Click <strong>Return to dashboard</strong>, or simply return to the main <strong>ServiceNow</strong> menu.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-flow">Test the flow<a href="#test-the-flow" class="hash-link" aria-label="Direct link to Test the flow" title="Direct link to Test the flow">​</a></h2><p>Congratulations, you&#x27;ve made it to the end of this guide. If you navigate to your service catalog, the YubiKey - Pre-reg item should appear, and should invoke the custom flow developed on this page. You may enter into the form, fill it in with your shipment and Okta user information, and allow it a few days to process end-to-end.</p><p><img loading="lazy" alt="In service catalog" src="/yed-spoke-example/assets/images/pr-90-b52fd40dfed244beb8b64cc31a6a83ed.png" width="1980" height="1012" class="img_ev3q"></p><p>The form, flow, and actions developed over the course of this guide are yours to enhance, change, and modify - thank you for participating!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/YubicoLabs/yed-spoke-example/tree/main/docs/docs/fido-pre-reg/flows/okta.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/yed-spoke-example/docs/fido-pre-reg/flows"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Custom flow</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/yed-spoke-example/docs/references"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">References</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#flow-properties" class="table-of-contents__link toc-highlight">Flow properties</a></li><li><a href="#add-flow-trigger" class="table-of-contents__link toc-highlight">Add flow trigger</a></li><li><a href="#add-the-form-variables" class="table-of-contents__link toc-highlight">Add the form variables</a></li><li><a href="#add-the-read-okta-user-action" class="table-of-contents__link toc-highlight">Add the Read Okta User action</a></li><li><a href="#add-the-yubienterprise-transportsigning-keys-action" class="table-of-contents__link toc-highlight">Add the YubiEnterprise Transport/Signing Keys action</a></li><li><a href="#add-the-okta-create-enrollment-action" class="table-of-contents__link toc-highlight">Add the Okta Create Enrollment action</a></li><li><a href="#add-the-yubienterprise-create-shipment-pre-reg-action" class="table-of-contents__link toc-highlight">Add the YubiEnterprise create shipment (Pre-reg) action</a><ul><li><a href="#create-flow-variable" class="table-of-contents__link toc-highlight">Create flow variable</a></li><li><a href="#create-daily-cron-job" class="table-of-contents__link toc-highlight">Create daily cron job</a></li></ul></li><li><a href="#call-the-yubienterprise-get-shipment-pre-reg-action" class="table-of-contents__link toc-highlight">Call the YubiEnterprise get shipment (Pre-reg) action</a></li><li><a href="#call-the-yubienterprise-get-shipment-pre-reg-action-again" class="table-of-contents__link toc-highlight">Call the YubiEnterprise get shipment (Pre-reg) action again</a></li><li><a href="#add-the-okta-activate-credential-action" class="table-of-contents__link toc-highlight">Add the Okta Activate Credential action</a></li><li><a href="#add-an-approval-before-sending-the-yubikey-pin" class="table-of-contents__link toc-highlight">Add an approval before sending the YubiKey PIN</a></li><li><a href="#add-the-send-pin-action" class="table-of-contents__link toc-highlight">Add the Send PIN action</a></li><li><a href="#review-finalized-flow" class="table-of-contents__link toc-highlight">Review finalized flow</a></li><li><a href="#activate-the-flow" class="table-of-contents__link toc-highlight">Activate the Flow</a></li><li><a href="#test-the-flow" class="table-of-contents__link toc-highlight">Test the flow</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other resources and guides</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developers.yubico.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">developers.yubico.com</a></li><li class="footer__item"><a href="https://yubicolabs.github.io/passkey-workshop/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Passkey workshop</a></li><li class="footer__item"><a href="https://yubicolabs.github.io/secure-software-supply-chain-guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Secure software supply chain guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/yubico" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Yubico © 2024. Built with Docusaurus.</div></div></div></footer></div>
<script src="/yed-spoke-example/assets/js/runtime~main.d5b39566.js"></script>
<script src="/yed-spoke-example/assets/js/main.6e0359a0.js"></script>
</body>
</html>